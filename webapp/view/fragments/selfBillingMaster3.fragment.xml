<core:FragmentDefinition
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:f="sap.f"
    xmlns:fb="sap.ui.comp.filterbar"
    xmlns:ui="sap.ui.table"
    xmlns:mvc="sap.ui.core.mvc"
>
    <fb:FilterBar
        class="sapUiSmallMarginBottom"  
        id="1"
        persistencyKey="myPersKey"
        useToolbar="false"
        search=".onSearch"
        filterChange=".onFilterChange"
        afterVariantLoad=".onAfterVariantLoad"
        showGoOnFB="true"
        showFilterConfiguration="true"
    >
        <fb:filterGroupItems>
            <fb:FilterGroupItem
                name="Date Processamento EDI"
                label="Date Processamento EDI"
                groupName="Group1"
                visibleInFilterBar="true"
            >
                <fb:control>
                    <DatePicker
                        tooltip="..."
                        secondaryCalendarType="Gregorian"
                        change="handleChange"
                    />
                </fb:control>
            </fb:FilterGroupItem>
            <fb:FilterGroupItem
                id="2"
                name="Date di consegna"
                label="Date di consegna"
                groupName="Group1"
                visibleInFilterBar="true"
            >
                <fb:control>
                    <DatePicker
                        tooltip="..."
                        secondaryCalendarType="Gregorian"
                        change="handleChange"
                    />
                </fb:control>
            </fb:FilterGroupItem>
            <fb:FilterGroupItem
                name="Cliente"
                label="Cliente"
                groupName="Group1"
                visibleInFilterBar="true"
            >
                <fb:control>
                    <Input />
                </fb:control>
            </fb:FilterGroupItem>
            <fb:FilterGroupItem
                name="Materiale"
                label="Materiale"
                groupName="Group1"
                visibleInFilterBar="true"
            >
                <fb:control>
                    <Input />
                </fb:control>
            </fb:FilterGroupItem>

            <fb:FilterGroupItem
                name="Stato"
                label="Stato"
                groupName="Group1"
                visibleInFilterBar="true"
            >
                <fb:control>
                    <ComboBox
                        name=""
                        selectionChange=".onSelectionChange"
                    >
                        <core:Item
                            key="{key}"
                            text="OK"
                        />
                        <core:Item
                            key="{key}"
                            text="KO"
                        />
                        <core:Item
                            key="{key}"
                            text="WARNING"
                        />
                    </ComboBox>
                </fb:control>
            </fb:FilterGroupItem>
        </fb:filterGroupItems>
    </fb:FilterBar>

    <ui:TreeTable
        id="TreeTableBasic"
        rows="{master3>/posizioni}"
        selectionMode="MultiToggle"
        enableSelectAll="false"
        ariaLabelledBy="title"
    >
        <ui:extension>
            <OverflowToolbar style="Clear">
                <Title id="toobar" />
                <ToolbarSpacer />
                <Button
                    text="Collapse all"
                    press="onCollapseAll"
                />
                <Button
                    text="Collapse selection"
                    press="onCollapseSelection"
                />
                <Button
                    text="Expand first level"
                    press="onExpandFirstLevel"
                />
                <Button
                    text="Expand selection"
                    press="onExpandSelection"
                />
                <Button
                    icon="sap-icon://sort"
                    text="Ordinamento"
                    press="sortCategories"
                />
                <Button
                    icon="sap-icon://excel-attachment"
                    text="Import excel"
                    press=""
                />
                <Button
                    id="buttonDelete2"
                    text="Esportazione in excel"
                    icon="sap-icon://excel-attachment"
                    press="deletePress"
                />
                <Button
                    id="buttonProcessa2"
                    text="Processa"
                    icon="sap-icon://process"
                    press="onProcessaButton"
                    type="Emphasized"
                />
                <Button
                    id="buttonRielabora2"
                    text="Rielabora"
                    icon="sap-icon://synchronize"
                    press=""
                    type="Attention"
                />
                <Button
                    id="buttonElimina2"
                    text="Elimina"
                    icon="sap-icon://delete"
                    press=""
                    type="Reject"
                />
            </OverflowToolbar>
        </ui:extension>
        <ui:columns>
            <ui:Column>
                <Label text="destinatario" />
                <ui:template>
                    <!-- <Button icon="{= ${master3>Stato} === 'OK' ? 'sap-icon://accept' : ${master3>Stato} === 'KO' ? 'sap-icon://decline' : 'sap-icon://warning'}" 
                                type="{= ${master3>Stato} === 'OK' ? 'Accept' : ${master3>Stato} === 'KO' ? 'Critical' : 'Attention'}"
                                tooltip="{master3>Stato}"/> -->
                    <!-- <Button text="{master3>template}"></Button> -->
                    <Text text="{master3>destinatario}" />
                </ui:template>
            </ui:Column>
            <ui:Column>
                <Label text="quantita_da_consegnare" />
                <ui:template>
                    <!-- <ObjectIdentifier
                                    title="{master3>CompanyName}"
                                /> -->
                    <Text text="{master3>quantita_da_consegnare}" />
                </ui:template>
            </ui:Column>
            <ui:Column>
                <Label text="Numero idoc" />
                <ui:template>
                    <ObjectIdentifier title="{master3>numero_idoc}" />
                </ui:template>
            </ui:Column>
            <ui:Column>
                <Label text="Data ricezione" />
                <ui:template>
                    <ObjectIdentifier title="{master3>data_ricezione}" />
                </ui:template>
            </ui:Column>
            <!-- body -->
            <ui:Column>
                <Label text="destinatario" />
                <ui:template>
                    <ObjectIdentifier title="{master3>destinatario}" />
                </ui:template>
            </ui:Column>
            <ui:Column>
                <Label text="punto_scarico" />
                <ui:template>
                    <ObjectIdentifier title="{master3>punto_scarico}" />
                </ui:template>
            </ui:Column>
            <!-- sched -->
            <ui:Column>
                <Label text="quantita_da_consegnare" />
                <ui:template>
                    <ObjectIdentifier
                        title="{master3>quantita_da_consegnare}"
                    />
                </ui:template>
            </ui:Column>
            <ui:Column>
                <Label text="data_spedizione_richiesta_a" />
                <ui:template>
                    <ObjectIdentifier
                        title="{master3>data_spedizione_richiesta_a}"
                    />
                </ui:template>
            </ui:Column>
        </ui:columns>
    </ui:TreeTable>
</core:FragmentDefinition>
